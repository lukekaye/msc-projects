
# Stock Management & Billing Application

## Overview

This Python program provides functionality for managing stock items within an inventory and producing receipts associated with the purchase of that stock.

The main features of the program are:

 - Reading and saving an inventory containing stock items from and to a `.csv` (comma-separated values) file;
 - Searching the inventory for information about the stock items contained within;
 - Amending the contents of the inventory through adding, editing, and removing stock items;
 - Adding stock items contained within the inventory to a basket to be checked out (i.e. purchased);
 - Producing receipts when the contents of the basket of stock items have been checked out.

## Assumptions

 - The entire program utilises case insensitive input; for example, the program treats an input `GOLD RING` to be identical to an input `gold ring`. This is designed to assist with ease of use, with the small trade off of not allowing differentiation between stock items through capitalisation.

 - All stock items must be defined with five parameters: `name`, `category`, `perishable`, `stock`, `sell_price`, with types string, string, boolean, non-negative integer, non-negative float of no more than two decimal places, respectively. Additionally, no two stock items can share the same name, nor can any parameter contain commas.

## How to run

The program was written in Python 3.10, therefore it is recommended the user runs the program using an installation of Python 3.10. Python versions 3.6 through 3.9 may work but this is untested. Python versions 3.5 and earlier do not support the program. Additionally, the program was written and tested using Windows 11, but may work on other Windows versions, macOS, and Linux.

To use the program, ensure that the following files are present in the same directory:
 - `main.py`
 - `item.py`
 - `stock.py`
 - `inventory.py`
 - `basket.py`

The program is also shipped with `testfile.py` but this is solely used for testing that the functionality of the program works correctly and is only intended to be used by a developer working on the program. Additionally, the program is shipped with and utilises a `database.csv` file and a receipts directory, however these will be generated by the program when appropriate during use if they are not found in the same directory as the Python files.

To start the program, run the `main.py` file.

## Use case

Here we illustrate a use case of the program that incorporates all of the main features of the program. As all user input, and all program output, is text-based, it is appropriate to outline this use case with text-based inputs and outputs.

The program is shipped with a `database.csv` file that contains sample stock items, which will be referenced in this use case.

Upon running `main.py`, we are greeted by a terminal window, associated with the operating system that we are running the program on. The terminal window displays the following output:

>     STOCK SYSTEM TOOL - Main Menu
>  
>     1: Search for items 
>     2: Add/Edit/Delete items 
>     3: Edit/View shopping basket 
>     4: Checkout basket and generate receipt 
>     5: Save changes and quit program
>     
>     Specify function:

Here, the program accepts an input of either `1`, `2`, `3`, `4`, or `5`. This convention follows for any other menu that lists options with numbers.

Already, the program has ran some functionality in the background; it has imported the comma separated values from the `database.csv` file and stored them internally in the program as stock items, all contained within an inventory. Specifically, each line in `database.csv` corresponds to one stock item, with five values separated by four commas that individually represent a parameter for each stock item. If `database.csv` was not found in the same directory as the rest of the program files, a blank `database.csv` will be generated here.

### Searching the inventory

Firstly, we will check the contents of the inventory to see all stock items contained within. We type `1` to state our desire to access the `Search for items` functionality, showing the following in the terminal:

>     Specify function: 1

We then press enter to provide this instruction to the program. All input given to the program is done in this manner.

We then see the following in the terminal:

>     Choose item parameter to search ("name", "category", "perishable", "price") 
>     Alternatively, enter "*" to display entire contents of database
>     
>     Specify parameter:

Here, the program will only accept inputs `name`, `category`, `perishable`, `price`, `*`, all of which are case insensitive, as are all inputs given to the program. All other choice dialogues like this in the program behave in the same way.

To check the entire contents of the inventory, we enter `*`, returning the following:

>     Name: gold ring | Category: jewellery | Perishable: False | Stock: 4 | Sell Price: £180.00
>     Name: jade bracelet | Category: jewellery | Perishable: False | Stock: 2 | Sell Price: £250.00
>     Name: tt handmade shell necklace | Category: jewellery | Perishable: False | Stock: 15 | Sell Price: £90.00
>     Name: tt homemade strawberry jam | Category: food | Perishable: True | Stock: 30 | Sell Price: £6.00
>     Name: tt homemade blackberry jam | Category: food | Perishable: True | Stock: 20 | Sell Price: £6.00
>     Name: tt homemade shortbread | Category: food | Perishable: True | Stock: 10 | Sell Price: £8.00
>     Name: local postcard | Category: misc | Perishable: False | Stock: 50 | Sell Price: £3.00
>     Name: handwoven basket | Category: home | Perishable: False | Stock: 15 | Sell Price: £15.00
>     Name: village canvas | Category: home | Perishable: False | Stock: 10 | Sell Price: £150.00
>     Name: small animal sculpture | Category: home | Perishable: False | Stock: 5 | Sell Price: £25.00

This output details every item contained within the inventory of stock, for example, the first item with:

 - `name = 'gold ring'` (type string)
 - `category = 'jewellery'` (type string)
 - `perishable = False` (type boolean)
 - `stock = 4` (type integer)
 - `sell_price = 180.0` (type float)

We can see that the Sell Price is prefixed by `£` and is standardised to have two decimal places in the output, regardless of its value. The output above is not sorted in any way and is purely dictated by the order of which we have added the items to the inventory.

Following this, we are returned to the main menu, which is displayed again as above, which occurs each time we complete a primary function within the program.

Next, we wish to see all items that satisfy `perishable = True`. We enter `1`, then `perishable`. We are then asked to specify a search term for the perishable parameter, for which we enter `true`. We then see the following:

>     Name: tt homemade strawberry jam | Category: food | Perishable: True | Stock: 30 | Sell Price: £6.00
>     Name: tt homemade blackberry jam | Category: food | Perishable: True | Stock: 20 | Sell Price: £6.00
>     Name: tt homemade shortbread | Category: food | Perishable: True | Stock: 10 | Sell Price: £8.00

The program has returned a subset of the inventory, containing items that satisfy `perishable = True`. We could follow a 
similar process to return information on items satisfying other conditions.

### Adding a new item to the inventory

Next, we will add a new item with parameters `name = 'silver ring'`, `category = 'jewellery'`, `perishable = False`, `stock = 9`, `sell_price = 120.0`, to the inventory. We enter `2` and are greeted by the following:

>     1: Add an item
>     2: Edit an item
>     3: Delete an item
>     4: Return to main menu
>     
>     Specify selection:

This secondary menu allows us to access the functionality to add, edit, and delete items. or to simply return to the main menu. We enter `1`, and see the following:

>     Enter the name of the item you wish to add
>
>     Specify name:

We enter `silver ring`, which is our `name` parameter. We are then prompted in succession to provide parameters for `category`, `perishable`, `stock`, and `sell_price` in a similar fashion. Throughout this process and the rest of the program in the context of items, the program will not accept:

 - any parameter that contains commas,
 - an input for `name` that is already assigned to a different item,
 - an input for `perishable` not equal to `true` or `false` (case insensitive),
 - an input for `stock` that is not a non-negative integer,
 - an input for `sell_price` that is not a non-negative float of no more than two decimal places.

After providing inputs `jewellery`, `false`, `9`, and `120`, we see the following:

>     Are you sure you wish to add the the following item? (y/n):
>     Name: silver ring | Category: jewellery | Perishable: False | Stock: 9 | Sell Price: £120.00
>     
>     Specify decision:

The output usefully tells us the parameters we defined, which can prevent mistakes. The program also states that we should provide an input of either `y` or `n` which are the only inputs the program accepts at this time, which follows for any other yes or no confirmation in the program.

If we made a mistake or changed our mind about adding a new item, we could enter `n` here to discard the proposed item. In this case, we wish to add this item to the inventory, so we enter `y`, and see the following:

>     silver ring was added
>     
>     1: Add another item
>     2: Return to main menu
>     
>     Specify selection:

A similar output follows if we had instead entered `n`. Entering `1` here would raise the prompt asking us to specify a name for another item. Instead, we enter `2` and are returned to the main menu.

### Editing an item within the inventory

Next, we will edit our new `silver ring` item to have `sell_price = 119.99`. From the main menu, we enter `2`, then `2`. We then see the following:

>     Enter the exact name of the item you wish to edit
>     
>     Specify name:

We enter `silver ring`, and see the following:

>     Name: silver ring | Category: jewellery | Perishable: False | Stock: 9 | Sell Price: £120.00
>     
>     Select which parameter of silver ring to edit ("name", "category", "perishable", "stock", "price")
>     
>     Specify parameter:

The output here displays all information associated with the `silver ring` item. We enter `price` and see the following:

>     Enter value to change price parameter of silver ring to
>     
>     Specify value:

We enter `199.99`, and see the following:

>     Are you sure you wish to change the price value of silver ring to £199.99? (y/n)
>    
>     Specify decision:

Just like with adding an item, if we enter `n` here, the program discards our proposed change. We enter `y` here and see the following:

>     silver ring price value was changed to 199.99
>     
>     1: Edit another item
>     2: Return to main menu
>     
>     Specify selection:

A similar output follows if we had instead entered `n`. Entering `1` here would raise the prompt asking us to specify the name for a different item we wish to edit. Instead, we enter `2` and are returned to the main menu.

### Deleting an item from the inventory

Next, we will delete our `silver ring` item. From the main menu, we enter `2`, then `3`. We then see the following:

>     Enter the exact name of the item you wish to delete
>     
>     Specify name:

We enter `silver ring`, and see the following:

>     Name: silver ring | Category: jewellery | Perishable: False | Stock: 9 | Sell Price: £199.99
>     
>     Are you sure you wish to delete silver ring? (y/n)
>     
>     Specify decision:

The output displays all information associated with the `silver ring` item. We then specify if we wish to delete `silver ring` or not. If we specified `n` here then no action would be taken. Instead, we enter `y` and see the following:

>     silver ring was deleted
>     
>     1: Delete another item
>     2: Return to main menu
>     
>     Specify selection:

A similar output follows if we had instead entered `n`. Entering `1` here would raise the prompt asking us to specify the name for a different item we wish to delete. Instead, we enter `2` and are returned to the main menu.

### Adding items to the basket from the inventory

Next, we will add four `gold ring` items to the shopping basket for the eventual purpose of processing a check out. From the menu, we enter `3` and see the following:

>     1: Add an item to the basket
>     2: Remove an item from the basket
>     3: View the contents of the basket
>     
>     Specify selection:

If we entered `2` or `3` here at the moment then the program would return an output stating that the basket is empty, which it currently is. We would then be returned to the main menu. Instead, we enter `1` and see the following:

>     Enter the name of the item within the inventory you wish to add to the basket
>     
>     Specify name:

We enter `gold ring` here and see the following:

>     Name: gold ring | Category: jewellery | Perishable: False | Stock: 4 | Sell Price: £180.00
>     
>     State quantity of gold ring to add to basket
>     
>     Specify quantity:

The output shows information relating to `gold ring`, which usefully includes the current stock of the item. We enter `4` and see the following:

>     4x gold ring was added to basket, item total in basket is 4
>     
>     1: Add a different item to the basket
>     2: Return to main menu
>     
>     Specify selection:

Here, as `gold ring` did not already exist in the basket, an item has been created in the basket with identical parameters to the `gold ring` item as defined in the inventory, instead with the stock count of `4` that we requested. If some quantity of `gold ring` already existed in the basket, the program would instead add the newly requested amount of `gold ring` to the existing amount of `gold ring` in the basket.

The inventory now has a stock count of `0` for the `gold ring` item; whenever we add a quantity of an item to the basket, an equal amount will be removed from the inventory. We will attempt to add another `gold ring` to the basket. We enter `1` and are prompted again to enter a name for an item we wish to add to the basket. We enter `gold ring` and see the following:

>     gold ring has no available stock to purchase, therefore gold ring was not added to basket
>     
>     1: Add a different item to the basket
>     2: Return to main menu
>     
>     Specify selection:

The program tells us that as no more stock exists for `gold ring` in the inventory, we cannot add more of it to the basket.

We will attempt to add eleven `village canvas` items to the basket. From the above screen, we enter `1` to add another item, then enter `village canvas` and see the following:

>     Name: village canvas | Category: home | Perishable: False | Stock: 10 | Sell Price: £150.00
>     
>     State quantity of village canvas to add to basket
>     
>     Specify quantity:

We can see here that village canvas only has a stock count of `10`. Regardless, we will attempt to add eleven of these to the basket. We enter `11` and see the following:

>     Available stock of village canvas (10) is less than requested amount
>     Purchase maximum amount (10) instead? (y/n)
>     
>     Specify decision:

The program has correctly identified that our requested amount exceeds the amount stored within the inventory. It asks us if we instead wish to add the maximum quantity available to the basket. Entering `n` here would return an output stating that no `village canvas` was added to the basket, and prompt us to either add another item to the basket or return to the main menu. We enter `y` here and see the following:

>     10x village canvas was added to basket, item total in basket is 10
>     
>     1: Add a different item to the basket
>     2: Return to main menu
>     
>     Specify selection:

The maximum amount of `village canvas` has now been added to the basket. We enter `2` and return to the main menu. 

The adding to basket process is repeated again to add ten `local postcard` items to the basket.

### Removing an item from the basket

Next, we will remove all `local postcard` items from the basket. From the main menu, we enter `3`, then `2`, and see the following:

>     Enter the name of the item within the basket you wish to remove and return to the inventory
>     
>     Specify name:

We enter `local postcard` and see the following:

>     Name: local postcard | Category: misc | Perishable: False | Stock: 10 | Sell Price: £3.00
>     
>     Are you sure you wish to remove local postcard from the basket and return it to the inventory? (y/n)
>     
>     Specify decision:

If we entered `n` here then no action would be taken. Instead, we enter `y` and see the following:

>     local postcard x10 was removed from the basket and returned to the inventory
>     
>     1: Remove a different item from basket
>     2: Return to main menu
>     
>     Specify selection:

A similar output follows if we had instead entered `n`. The program tells us that all `local postcard` items in the basket have been removed and returned to the inventory. We enter `2` to return to the main menu.

### Checking the contents of the basket

We will now check the contents of the basket. From the main menu, we enter `3`, then `3`, and see the following:

>     Name: gold ring | Category: jewellery | Perishable: False | Stock: 4 | Sell Price: £180.00
>     Name: village canvas | Category: home | Perishable: False | Stock: 10 | Sell Price: £150.00

Here, we see the `gold ring` and `village canvas` items we added before, with their respective quantities of stock we added to the basket. Accessing this function immediately returns us to the main menu afterwards.

### Check out the basket and produce a receipt

Next, we wish to check out the items we have placed in the basket, that is, we wish to process a purchase for them. From the menu, we enter `4` and see the following:

>     Contents of basket:
>     Name: gold ring | Category: jewellery | Perishable: False | Stock: 4 | Sell Price: £180.00
>     Name: village canvas | Category: home | Perishable: False | Stock: 10 | Sell Price: £150.00
>     
>     Do you wish to checkout these items? (y/n)
>     
>     Specify decision:

Entering `n` here would return an output stating that the basket was not checked out and then return us to the main menu. Instead, we enter `y`, and see the following:

>     Is the customer purchasing these items a member? (y/n)
>     
>     Specify decision:

Here we can specify whether the customer is a `member` or not. The member status of the customer affects the final price total printed on the receipt by these conditions:

 - If the customer *is not a member*, no discount is applied;
 - If the customer *is a member* and they spend *less than or equal to* £50, a 5% discount is applied;
 - If the customer *is a member* and they spend *more than* £50, a 10% discount is applied.

Note the specific *less than*, *equal to*, and *more than* conditions in the above. We enter `y` to state the customer is a `member`, and see the following:

>     -------------------------------------------------------------------------
>     Purchase Receipt                                      2022-10-16 11:39:22
>     -------------------------------------------------------------------------
>     Quantity   Item                           Price      Total
>     4          gold ring                      £180.00    £720.00
>     10         village canvas                 £150.00    £1500.00
>     -------------------------------------------------------------------------
>     Subtotal   £2220.00
>     Discount   £222.00
>     Total      £1998.00
>     -------------------------------------------------------------------------
>     
>     receipt (1) saved to receipts folder

The above output shows the receipt for the transaction we just processed. The program also generates a receipt `.txt` file, the name of which is specified in the above output, in this case, `receipt (1).txt`. The receipt output in the program is identical to the contents of the receipt `.txt` file that is generated.

The receipt states various information:

 - The date and time that the receipt was generated;
 - A matrix featuring rows that each contain an item that was checked out, and columns that each contain a parameter corresponding to these items;
 - A column stating the pre-discount total of all items checked out, the discount amount, and the post-discount total of all items checked out.

The saving of receipt `.txt` files works as follows:

 - Firstly, the existence of a `receipts` directory is checked in the same directory as the program. If it is not found, then create one.
 - Secondly, within that `receipts` directory, starting from `x = 1`, check if a file called `receipt (x).txt` exists. If it does not, then save the receipt with name `receipt (x).txt`. If it does, then add `1` to `x` and check again. Repeat indefinitely until finding the first instance of `receipt (x).txt` that does not exist and save the receipt with that name.

In the specific case of the receipt above, we see that our four `gold ring` and ten `village canvas` items were checked out, with their unit prices and individual totals stated. The pre-discount total is then stated, then the 10% discount (since the pre-discount total exceeded £50), then finally the post-discount total. We also see the date and time of receipt generation, in this case `2022-10-16 11:39:22`, formatted as YYYY-MM-DD HH:MM:SS.

After receipt generation, we are returned to the main menu.

### Save the inventory and quit the program

Finally, we wish to save the changes to the inventory, in this case, the decrease of the stock counts of the `gold ring` and `village canvas` items by `4` and `10` respectively (due to the checkout ran above) and quit the program.

From the main menu, we enter `5` and see the following:

>     Saved successfully, program will terminate in 5s

The program immediately saves any changes that were made to the inventory (through adding, editing, deleting, or checking out items) to the `database.csv` file, waits for 5 seconds, then exits the program. If we had any items in the basket that we had not checked out and we selected to save and quit the program, the contents of the basket would first be returned to the inventory before any saving happened to ensure that items were not deleted from `database.csv` erroneously.

If we were to run the program again, we would find that any changes made in the previous session to `database.csv` successfully carry over to the next session.

## Advice and other information

 - The `database.csv` file shipped with this program contains an inventory of a set of sample items that can be used to understand the format for which stock items should follow. If you wish to delete this to make your own inventory, or indeed for any other reason, simply delete `database.csv` and run the program; it will generate an empty `database.csv`.

 - You should never edit `database.csv` manually unless you are confident with the format of the file; any erroneous edits to the file (duplicate item names, extra commas, etc) can cause the program to crash or work in unintended ways.

 - If you wish to back up `database.csv`, simply copy and paste the file into a different directory to the program. Similarly, if you wish to load a backup, copy and paste it back into the same directory as the program, overwriting any current `database.csv` in the process.

 - You should always exit the program using the `Save changes and quit program` function within the program to ensure any changes to the stock inventory save correctly.

 - In the context of stock items, you should be careful in how you use spaces in name and category parameters. The program considers `'gold ring'` and `'gold ring '`  (notice the space at the end of the second item) to be different items. While this doesn't cause any errors within the program, it will avoid you accidentally creating seemingly duplicate items or categories, which can impact various functions such as searching.

 - As stock items are added to the basket, they are simultaneously removed from the inventory, even before a checkout has taken place. This is intended behaviour. Running the `Save changes and quit program` function will return all items in the basket to the inventory before saving occurs to ensure no items are deleted from `database.csv` erroneously.

 - Items in the inventory can have `stock = 0` and `sell_price = 0.0`. This is intended behaviour. If you wish to remove an item from the inventory completely, this must be done using the remove item functionality.

 - Any Item `name` should not exceed 30 characters, any item `stock` should not exceed a value of `9999999999`, any item `sell_price` should not exceed a value of `999999.99`; while the program does not enforce these restrictions, nor does it cause the program to run in an unintended way or crash, exceeding these values can cause receipts to poorly format.


